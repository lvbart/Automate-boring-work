<!DOCTYPE html>
<html lang="en">
      <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width,height=device-height">
      <title>全球航空业 2008-2016 财务数据展示</title>
      <style>::-webkit-scrollbar{display:none;}html,body{overflow:hidden;height:100%;margin:0;}</style>
      </head>
      <body>
      <div id="mountNode"></div>
      <script>/*Fixing iframe window.innerHeight 0 issue in Safari*/document.body.clientHeight;</script>
      <script src="https://gw.alipayobjects.com/os/antv/pkg/_antv.g2-3.5.1/dist/g2.min.js"></script>
      <script src="https://gw.alipayobjects.com/os/antv/pkg/_antv.data-set-0.10.1/dist/data-set.min.js"></script>
      <script src="https://gw.alipayobjects.com/os/antv/assets/lib/jquery-3.2.1.min.js"></script>
      <script>
      var data = [{
      year: 2008,
      收入: 35,
      成本: 70
      }, {
      year: 2009,
      收入: 59,
      成本: 81
      }, {
      year: 2010,
      收入: 76,
      成本: 96
      }, {
      year: 2011,
      收入: 65,
      成本: 97
      }, {
      year: 2012,
      收入: 67,
      成本: 93
      }, {
      year: 2013,
      收入: 79,
      成本: 90
      }, {
      year: 2014,
      收入: 115,
      成本: 79
      }, {
      year: 2015,
      收入: 163,
      成本: 85
      }, {
      year: 2016,
      收入: 185,
      成本: 93
      }];
      var ds = new DataSet();
      var dv = ds.createView().source(data);
      dv.transform({
      type: 'map',
      callback: function callback(row) {
            row.range = [row.收入, row.成本];
            return row;
      }
      });
      dv.transform({
      type: 'fold',
      fields: ['收入', '成本'],
      key: 'type',
      value: 'value'
      });
      var chart = new G2.Chart({
      container: 'mountNode',
      forceFit: true,
      height: window.innerHeight,
      padding: [20, 100, 50, 30]
      });
      chart.source(dv, {
      value: {
            min: 0,
            max: 200
      },
      range: {
            min: 0,
            max: 200
      }
      });
      chart.axis('range', false);
      chart.axis('year', {
      label: {
            textStyle: {
            fill: '#aaaaaa'
            }
      }
      });
      chart.axis('value', {
      label: {
            textStyle: {
            fill: '#aaaaaa'
            }
      }
      });
      chart.legend({
      attachLast: true
      });
      chart.tooltip({
      crosshairs: {
            type: 'line'
      }
      });
      chart.line().position('year*value').color('type', ['#F5222D', '#FAAD14']).size(2.5).shape('smooth');
      chart.area().position('year*range').color('#ffffff').shape('smooth').tooltip(false).opacity(0.4);
      chart.guide().regionFilter({
      top: true,
      start: [2008, 'min'],
      end: [2016, 'max'],
      color: '#F5222D',
      apply: ['area']
      });
      chart.guide().regionFilter({
      top: true,
      start: [2008, 'min'],
      end: [2019, 'max'],
      color: '#FAAD14',
      apply: ['area']
      });
      chart.guide().dataMarker({
      position: [2013, 79],
      content: '油价下降\n导致需求激增。',
      lineLength: 50,
      style: {
            text: {
            textAlign: 'left',
            fontSize: 12
            },
            point: {
            stroke: '#FF4D4F'
            }
      },
      direction: 'downward'
      });
      chart.guide().text({
      top: true,
      position: [1730, 80],
      content: '赤字',
      style: {
            fontSize: 14,
            fontWeight: 'normal',
            fill: 'rgba(0,0,0,0.45)'
      }
      });
      chart.guide().text({
      top: true,
      position: [1765, 110],
      content: '盈余',
      style: {
            fontSize: 14,
            fontWeight: 'normal',
            fill: 'rgba(0,0,0,0.45)'
      }
      });
      chart.render();
      </script>
      </body>
</html>